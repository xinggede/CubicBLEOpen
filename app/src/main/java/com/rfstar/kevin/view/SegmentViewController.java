package com.rfstar.kevin.view;import android.content.Context;import android.view.LayoutInflater;import android.view.View;import android.widget.LinearLayout;import android.widget.TextView;import com.rfstar.kevin.R;import java.util.ArrayList;import java.util.List;public class SegmentViewController extends LinearLayout {    private LinearLayout firstLayout, secondlayout, thirdlayout;    private TextView firstText, secondTxt, thirdTxt;    private SegmentViewControllerClickListener clickListener;    private List<LinearLayout> layouts = null;    private List<TextView> txts = null;    private int pressedState = 0; // 状态    private Context context;    /**     * 初始化     *     * @param context     * @param array     */    public SegmentViewController(Context context) {        super(context);        // TODO Auto-generated constructor stub        this.layouts = new ArrayList<LinearLayout>();        this.txts = new ArrayList<TextView>();        this.initView(context);    }    public void setOnClick(SegmentViewControllerClickListener listener) {        this.clickListener = listener;    }    /**     * 初始化界面     *     * @param context     */    @SuppressWarnings("static-access")    private void initView(Context context) {        this.context = context;        LayoutInflater.from(context).inflate(R.layout.segment_view_bar, this,                true);        firstLayout = (LinearLayout) this.findViewById(R.id.first_item);        secondlayout = (LinearLayout) this.findViewById(R.id.second_item);        thirdlayout = (LinearLayout) this.findViewById(R.id.third_item);        firstText = (TextView) this.findViewById(R.id.first_txt);        secondTxt = (TextView) this.findViewById(R.id.second_txt);        thirdTxt = (TextView) this.findViewById(R.id.third_txt);        this.layouts.add(firstLayout);        this.layouts.add(secondlayout);        this.layouts.add(thirdlayout);        this.txts.add(firstText);        this.txts.add(secondTxt);        this.txts.add(thirdTxt);        for (int position = 0; position < layouts.size(); position++) {            this.layouts.get(position).setOnClickListener(                    new BtnClick(position));        }        this.setFirstEnabled();    }    /**     * 设置为可操作     */    public void setEnabled() {        for (int count = 0; count < layouts.size(); count++) {            layouts.get(count).setEnabled(false);            txts.get(count).setEnabled(false);        }    }    /**     * 设置初始状态     */    private void setFirstEnabled() {        for (LinearLayout layout : layouts) {            // layout.setLayoutParams(new LayoutParams((int) 600 /            // layouts.size(),            // layout.getLayoutParams().height));// 重新计算选中栏的长度        }        layouts.get(0).setEnabled(false);        txts.get(0).setEnabled(false);    }    /**     * 导航条中事件的接口     *     * @author kevin     */    public interface SegmentViewControllerClickListener {        public void SegmentControllerClick(int position);    }    /**     * 导航条button的事件     *     * @author kevin     */    private class BtnClick implements OnClickListener {        private int position = 0;        public BtnClick(int position) {            this.position = position;        }        @Override        public void onClick(View v) {            // TODO Auto-generated method stub            for (int count = 0; count < layouts.size(); count++) {                if (count == this.position) {                    layouts.get(count).setEnabled(false);                    txts.get(count).setEnabled(false);                } else {                    layouts.get(count).setEnabled(true);                    txts.get(count).setEnabled(true);                }            }            if (clickListener != null)                clickListener.SegmentControllerClick(position);            pressedState = position;        }    }    public int getSelected() {        return pressedState;    }}